{"remainingRequest":"D:\\czy\\node_modules\\vue-loader\\lib\\index.js??ref--1-1!D:\\czy\\node_modules\\@vuepress\\markdown-loader\\index.js??ref--1-2!D:\\czy\\docs\\handbook\\test.md?vue&type=script&lang=js&","dependencies":[{"path":"D:\\czy\\docs\\handbook\\test.md","mtime":1678849613129},{"path":"D:\\czy\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678845032471},{"path":"D:\\czy\\node_modules\\babel-loader\\lib\\index.js","mtime":1672731239781},{"path":"D:\\czy\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678845032471},{"path":"D:\\czy\\node_modules\\vue-loader\\lib\\index.js","mtime":1678845033757},{"path":"D:\\czy\\node_modules\\@vuepress\\markdown-loader\\index.js","mtime":1678845032427}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgICBjb25zdCB7IGNyZWF0ZUFwcCwgb25Nb3VudGVkLCBvblVubW91bnRlZCwgcmVmLCByZWFjdGl2ZSwgdG9SZWZzLCBjb21wdXRlZCwgbmV4dFRpY2sgfSA9IFZ1ZQoKICAgIGNyZWF0ZUFwcCh7CiAgICAgIHNldHVwICgpCiAgICAgIHsKICAgICAgICBjb25zdCBzdGF0ZSA9IHJlYWN0aXZlKHsKICAgICAgICAgIHByaXplTGlzdDogWwogICAgICAgICAgICB7IG5hbWU6ICfmiYvmnLonLCBwaWM6ICdodHRwczovL2JraW1nLmNkbi5iY2Vib3MuY29tL3BpYy8zODAxMjEzZmI4MGU3YmVjNTRlN2QyMzdhZDdlYWUzODliNTA0ZWMyM2Q5ZScgfSwKICAgICAgICAgICAgeyBuYW1lOiAn5omL6KGoJywgcGljOiAnaHR0cHM6Ly9pbWcxLmJhaWR1LmNvbS9pdC91PTI2MzE3MTY1NzcsMTI5NjQ2MDY3MCZmbT0yNTMmZm10PWF1dG8mYXBwPTEyMCZmPUpQRUcnIH0sCiAgICAgICAgICAgIHsgbmFtZTogJ+iLueaenCcsIHBpYzogJ2h0dHBzOi8vaW1nMi5iYWlkdS5jb20vaXQvdT0yNjExNDc4ODk2LDEzNzk2NTk1NyZmbT0yNTMmZm10PWF1dG8mYXBwPTEzOCZmPUpQRUcnIH0sCiAgICAgICAgICAgIHsgbmFtZTogJ+ayoeS4reWllicsIHBpYzogJycgfSwKICAgICAgICAgICAgeyBuYW1lOiAn5aiD5aiDJywgcGljOiAnaHR0cHM6Ly9pbWcyLmJhaWR1LmNvbS9pdC91PTQwNzUzOTAxMzcsMzk2NzcxMjQ1NyZmbT0yNTMmZm10PWF1dG8mYXBwPTEzOCZmPVBORycgfSwKICAgICAgICAgICAgeyBuYW1lOiAn5pyo6amsJywgcGljOiAnaHR0cHM6Ly9pbWcxLmJhaWR1LmNvbS9pdC91PTI0MzQzMTg5MzMsMjcyNzY4MTA4NiZmbT0yNTMmZm10PWF1dG8mYXBwPTEyMCZmPUpQRUcnIH0sCiAgICAgICAgICAgIHsgbmFtZTogJ+W+t+iKmScsIHBpYzogJ2h0dHBzOi8vaW1nMC5iYWlkdS5jb20vaXQvdT0xMzc4NTY0NTgyLDIzOTc1NTU4NDEmZm09MjUzJmZtdD1hdXRvJmFwcD0xMjAmZj1KUEVHJyB9LAogICAgICAgICAgICB7IG5hbWU6ICfnjqvnkbAnLCBwaWM6ICdodHRwczovL2ltZzEuYmFpZHUuY29tL2l0L3U9MTEyNTY1NjkzOCw0MjIyNDc5MDAmZm09MjUzJmZtdD1hdXRvJmFwcD0xMjAmZj1KUEVHJyB9CiAgICAgICAgICBdLCAvLyDlkI7lj7DphY3nva7nmoTlpZblk4HmlbDmja4KICAgICAgICAgIGlzUnVubmluZzogZmFsc2UsIC8vIOaYr+WQpuato+WcqOaKveWllgogICAgICAgICAgYmFzZVJ1bkFuZ2xlOiAzNjAgKiA1LCAvLyDmgLvlhbHovazliqjop5LluqYg6Iez5bCRNeWciAogICAgICAgICAgcHJpemVJZDogMCwgLy8g5Lit5aWWaWQKICAgICAgICB9KQogICAgICAgIGNvbnN0IHByaXplV3JhcCA9IHJlZihudWxsKQoKCiAgICAgICAgLy8g5bmz5Z2H5q+P5Liq5aWW5ZOB6KeS5bqmCiAgICAgICAgY29uc3Qgcm90YXRlQW5nbGUgPSBjb21wdXRlZCgoKSA9PgogICAgICAgIHsKICAgICAgICAgIGNvbnN0IF9kZWdyZWUgPSAzNjAgLyBzdGF0ZS5wcml6ZUxpc3QubGVuZ3RoCiAgICAgICAgICByZXR1cm4gX2RlZ3JlZQogICAgICAgIH0pCgogICAgICAgIC8vIOimgeaJp+ihjOaAu+inkuW6puaVsAogICAgICAgIGNvbnN0IHRvdGFsUnVuQW5nbGUgPSBjb21wdXRlZCgoKSA9PgogICAgICAgIHsKICAgICAgICAgIHJldHVybiBzdGF0ZS5iYXNlUnVuQW5nbGUgKyAzNjAgLSBzdGF0ZS5wcml6ZUlkICogcm90YXRlQW5nbGUudmFsdWUgLSByb3RhdGVBbmdsZS52YWx1ZSAvIDIKICAgICAgICB9KQoKICAgICAgICAvLyDorqHnrpfnu5jliLbovaznm5jog4zmma8KICAgICAgICBjb25zdCBiZ0NvbG9yID0gY29tcHV0ZWQoKCkgPT4KICAgICAgICB7CiAgICAgICAgICBjb25zdCBfbGVuID0gc3RhdGUucHJpemVMaXN0Lmxlbmd0aAogICAgICAgICAgY29uc3QgY29sb3JMaXN0ID0gWycjNTM1MmIzJywgJyMzNjM1ODknXQogICAgICAgICAgbGV0IGNvbG9yVmFsID0gJycKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgX2xlbjsgaSsrKSB7CiAgICAgICAgICAgIGNvbG9yVmFsICs9IGAke2NvbG9yTGlzdFtpICUgMl19ICR7cm90YXRlQW5nbGUudmFsdWUgKiBpfWRlZyAke3JvdGF0ZUFuZ2xlLnZhbHVlICogKGkgKyAxKX1kZWcsYAogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGAKICAgICAgICAgICAgYmFja2dyb3VuZDogY29uaWMtZ3JhZGllbnQoJHtjb2xvclZhbC5zbGljZSgwLCAtMSl9KTsKICAgICAgICAgIGAKICAgICAgICB9KQogICAgICAgIC8vIOavj+S4quWlluWTgeW4g+WxgAogICAgICAgIGNvbnN0IHByaXplU3R5bGUgPSBjb21wdXRlZCgoKSA9PgogICAgICAgIHsKICAgICAgICAgIGNvbnN0IF9kZWdyZWUgPSByb3RhdGVBbmdsZS52YWx1ZQogICAgICAgICAgcmV0dXJuIChpKSA9PgogICAgICAgICAgewogICAgICAgICAgICByZXR1cm4gYAogICAgICAgICAgICAgIHdpZHRoOiAkezIgKiAyNzAgKiBNYXRoLnNpbihfZGVncmVlIC8gMiAqIE1hdGguUEkgLyAxODApfXB4OwogICAgICAgICAgICAgIGhlaWdodDogMjcwcHg7CiAgICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoJHtfZGVncmVlICogaSArIF9kZWdyZWUgLyAyfWRlZyk7CiAgICAgICAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogNTAlIDEwMCU7CiAgICAgICAgICAgIGAKICAgICAgICAgIH0KICAgICAgICB9KQoKICAgICAgICBvbk1vdW50ZWQoKCkgPT4KICAgICAgICB7CiAgICAgICAgICBwcml6ZVdyYXAudmFsdWUuc3R5bGUgPSBgJHtiZ0NvbG9yLnZhbHVlfSB0cmFuc2Zvcm06IHJvdGF0ZSgtJHtyb3RhdGVBbmdsZS52YWx1ZSAvIDJ9ZGVnKWAKICAgICAgICB9KQoKICAgICAgICBvblVubW91bnRlZCgoKSA9PgogICAgICAgIHsKICAgICAgICAgIHByaXplV3JhcC52YWx1ZS5yZW1vdmVFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgc3RvcFJ1bikKICAgICAgICB9KQoKICAgICAgICAvLyDojrflj5bpmo/mnLrmlbAKICAgICAgICBjb25zdCBnZXRSYW5kb21OdW0gPSAoKSA9PgogICAgICAgIHsKICAgICAgICAgIGNvbnN0IG51bSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHN0YXRlLnByaXplTGlzdC5sZW5ndGgpCiAgICAgICAgICByZXR1cm4gbnVtCiAgICAgICAgfQoKICAgICAgICBjb25zdCBzdGFydCA9ICgpID0+CiAgICAgICAgewogICAgICAgICAgaWYgKCFzdGF0ZS5pc1J1bm5pbmcpIHsKICAgICAgICAgICAgc3RhdGUuaXNSdW5uaW5nID0gdHJ1ZQoKICAgICAgICAgICAgY29uc29sZS5sb2coJ+W8gOWni+aKveWllu+8jOWQjuWPsOivt+axguS4reWlluWlluWTgScpCiAgICAgICAgICAgIC8vIOivt+axgui/lOWbnueahOWlluWTgee8luWPtyDov5nph4zkvb/nlKjpmo/mnLrmlbAKICAgICAgICAgICAgY29uc3QgcHJpemVJZCA9IGdldFJhbmRvbU51bSgpCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfkuK3lpZZJRD4+PicsIHByaXplSWQsIHN0YXRlLnByaXplTGlzdFtwcml6ZUlkXSkKICAgICAgICAgICAgc3RhdGUucHJpemVJZCA9IHByaXplSWQKICAgICAgICAgICAgc3RhcnRSdW4oKQogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgY29uc3Qgc3RhcnRSdW4gPSAoKSA9PgogICAgICAgIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHN0YXRlLmlzUnVubmluZywgdG90YWxSdW5BbmdsZS52YWx1ZSkKICAgICAgICAgIC8vIOiuvue9ruWKqOaViAogICAgICAgICAgcHJpemVXcmFwLnZhbHVlLnN0eWxlID0gYAogICAgICAgICAgICAke2JnQ29sb3IudmFsdWV9CiAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKCR7dG90YWxSdW5BbmdsZS52YWx1ZX1kZWcpOwogICAgICAgICAgICB0cmFuc2l0aW9uOiBhbGwgNHMgZWFzZTsKICAgICAgICAgIGAKICAgICAgICAgIC8vIOebkeWQrHRyYW5zaXRpb27liqjmlYjlgZzmraLkuovku7YKICAgICAgICAgIHByaXplV3JhcC52YWx1ZS5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgc3RvcFJ1bikKICAgICAgICB9CgogICAgICAgIGNvbnN0IHN0b3BSdW4gPSAoZSkgPT4KICAgICAgICB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlKQogICAgICAgICAgc3RhdGUuaXNSdW5uaW5nID0gZmFsc2UKICAgICAgICAgIHByaXplV3JhcC52YWx1ZS5zdHlsZSA9IGAKICAgICAgICAgICAgJHtiZ0NvbG9yLnZhbHVlfQogICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgke3RvdGFsUnVuQW5nbGUudmFsdWUgLSBzdGF0ZS5iYXNlUnVuQW5nbGV9ZGVnKTsKICAgICAgICAgIGAKICAgICAgICB9CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICAuLi50b1JlZnMoc3RhdGUpLAogICAgICAgICAgYmdDb2xvciwKICAgICAgICAgIHByaXplU3R5bGUsCiAgICAgICAgICBwcml6ZVdyYXAsCiAgICAgICAgICBzdGFydAogICAgICAgIH0KICAgICAgfQogICAgfSkubW91bnQoJyNhcHAnKQogIA=="},{"version":3,"sources":["test.md"],"names":[],"mappings":";AAwGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"test.md","sourceRoot":"docs/handbook","sourcesContent":["<template>\n<ContentSlotsDistributor :slot-key=\"$parent.slotKey\"><!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Document</title>\n  <style>\n    * {\n      margin: 0;\n      padding: 0;\n      box-sizing: border-box;\n    }\n<!--beforebegin--><div class=\"language- extra-class\"><!--afterbegin--><pre><code>&lt;!-- [v-cloak] {\n  display: none;\n} --&gt;\n\n.container {\n  width: 540px;\n  height: 540px;\n  /*background: #98d3fc url('https://www.jq22.com/demo/vue-luck-draw-pdmm202010260015/img/bg.a4b976d5.png') no-repeat center / 100% 100%;*/\n  /*background: conic-gradient( \n   red 6deg, orange 6deg 18deg, yellow 18deg 45deg, \n   green 45deg 110deg, blue 110deg 200deg, purple 200deg);*/\n  margin: 100px auto;\n  position: relative;\n}\n\n.prize-list {\n  width: 100%;\n  height: 100%;\n  border-radius: 50%;\n  border: 10px solid #98d3fc;\n  overflow: hidden;\n}\n\n.prize-item {\n  /*border: 2px solid red;*/\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: -10px;\n  margin: auto;\n}\n\n.prize-item img {\n  width: 30%;\n  height: 20%;\n  margin: 40px auto 10px;\n  display: block;\n}\n\n.prize-item p {\n  color: #fff;\n  font-size: 12px;\n  text-align: center;\n  line-height: 20px;\n}\n\n.btn {\n  width: 160px;\n  height: 160px;\n  background: url('https://www.jq22.com/demo/jquerylocal201912122316/img/btn_lottery.png') no-repeat center / 100% 100%;\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  margin: auto;\n  cursor: pointer;\n}\n\n.btn::before {\n  content: &quot;&quot;;\n  width: 41px;\n  height: 39px;\n  background: url('https://www.jq22.com/demo/jquerylocal201912122316/img/icon_point.png') no-repeat center / 100% 100%;\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: -33px;\n  margin: auto;\n}\n</code></pre>\n<!--beforeend--></div><!--afterend-->  </style>\n</head>\n<body>\n  <div id=\"app\" v-cloak>\n    <div class=\"container\">\n      <div class=\"prize-list\" ref=\"prizeWrap\" :style=\"bgColor\">\n        <div class=\"prize-item\" v-for=\"(item, index) in prizeList\" :style=\"prizeStyle(index)\">\n          <img :src=\"item.pic\" alt=\"\">\n          <p>{{ item.name }}</p>\n        </div>\n      </div>\n      <div class=\"btn\" @click=\"start\"></div>\n    </div>\n  </div>\n</body>\n</html></ContentSlotsDistributor>\n</template>\n  <script src=\"https://unpkg.com/vue@3/dist/vue.global.js\"></script>\n\n  <script>\n    const { createApp, onMounted, onUnmounted, ref, reactive, toRefs, computed, nextTick } = Vue\n\n    createApp({\n      setup ()\n      {\n        const state = reactive({\n          prizeList: [\n            { name: '手机', pic: 'https://bkimg.cdn.bcebos.com/pic/3801213fb80e7bec54e7d237ad7eae389b504ec23d9e' },\n            { name: '手表', pic: 'https://img1.baidu.com/it/u=2631716577,1296460670&fm=253&fmt=auto&app=120&f=JPEG' },\n            { name: '苹果', pic: 'https://img2.baidu.com/it/u=2611478896,137965957&fm=253&fmt=auto&app=138&f=JPEG' },\n            { name: '没中奖', pic: '' },\n            { name: '娃娃', pic: 'https://img2.baidu.com/it/u=4075390137,3967712457&fm=253&fmt=auto&app=138&f=PNG' },\n            { name: '木马', pic: 'https://img1.baidu.com/it/u=2434318933,2727681086&fm=253&fmt=auto&app=120&f=JPEG' },\n            { name: '德芙', pic: 'https://img0.baidu.com/it/u=1378564582,2397555841&fm=253&fmt=auto&app=120&f=JPEG' },\n            { name: '玫瑰', pic: 'https://img1.baidu.com/it/u=1125656938,422247900&fm=253&fmt=auto&app=120&f=JPEG' }\n          ], // 后台配置的奖品数据\n          isRunning: false, // 是否正在抽奖\n          baseRunAngle: 360 * 5, // 总共转动角度 至少5圈\n          prizeId: 0, // 中奖id\n        })\n        const prizeWrap = ref(null)\n\n\n        // 平均每个奖品角度\n        const rotateAngle = computed(() =>\n        {\n          const _degree = 360 / state.prizeList.length\n          return _degree\n        })\n\n        // 要执行总角度数\n        const totalRunAngle = computed(() =>\n        {\n          return state.baseRunAngle + 360 - state.prizeId * rotateAngle.value - rotateAngle.value / 2\n        })\n\n        // 计算绘制转盘背景\n        const bgColor = computed(() =>\n        {\n          const _len = state.prizeList.length\n          const colorList = ['#5352b3', '#363589']\n          let colorVal = ''\n          for (let i = 0; i < _len; i++) {\n            colorVal += `${colorList[i % 2]} ${rotateAngle.value * i}deg ${rotateAngle.value * (i + 1)}deg,`\n          }\n          return `\n            background: conic-gradient(${colorVal.slice(0, -1)});\n          `\n        })\n        // 每个奖品布局\n        const prizeStyle = computed(() =>\n        {\n          const _degree = rotateAngle.value\n          return (i) =>\n          {\n            return `\n              width: ${2 * 270 * Math.sin(_degree / 2 * Math.PI / 180)}px;\n              height: 270px;\n              transform: rotate(${_degree * i + _degree / 2}deg);\n              transform-origin: 50% 100%;\n            `\n          }\n        })\n\n        onMounted(() =>\n        {\n          prizeWrap.value.style = `${bgColor.value} transform: rotate(-${rotateAngle.value / 2}deg)`\n        })\n\n        onUnmounted(() =>\n        {\n          prizeWrap.value.removeEventListener('transitionend', stopRun)\n        })\n\n        // 获取随机数\n        const getRandomNum = () =>\n        {\n          const num = Math.floor(Math.random() * state.prizeList.length)\n          return num\n        }\n\n        const start = () =>\n        {\n          if (!state.isRunning) {\n            state.isRunning = true\n\n            console.log('开始抽奖，后台请求中奖奖品')\n            // 请求返回的奖品编号 这里使用随机数\n            const prizeId = getRandomNum()\n            console.log('中奖ID>>>', prizeId, state.prizeList[prizeId])\n            state.prizeId = prizeId\n            startRun()\n          }\n        }\n\n        const startRun = () =>\n        {\n          console.log(state.isRunning, totalRunAngle.value)\n          // 设置动效\n          prizeWrap.value.style = `\n            ${bgColor.value}\n            transform: rotate(${totalRunAngle.value}deg);\n            transition: all 4s ease;\n          `\n          // 监听transition动效停止事件\n          prizeWrap.value.addEventListener('transitionend', stopRun)\n        }\n\n        const stopRun = (e) =>\n        {\n          console.log(e)\n          state.isRunning = false\n          prizeWrap.value.style = `\n            ${bgColor.value}\n            transform: rotate(${totalRunAngle.value - state.baseRunAngle}deg);\n          `\n        }\n\n        return {\n          ...toRefs(state),\n          bgColor,\n          prizeStyle,\n          prizeWrap,\n          start\n        }\n      }\n    }).mount('#app')\n  </script>\n\n\n"]}]}